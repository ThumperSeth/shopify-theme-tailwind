<style>
  {%- if request.page_type == "index" -%}
  	.collection-SubMenu-Section {
     /*display: none; */
    }
  {%- endif -%}
.brandbox {
	/*border-bottom: 4px solid black;
	box-shadow: 0px 10px 5px grey;*/
   min-width:100px
}
/*.bendybox-45 {
    border-bottom: 4px solid black;
    border-right: 4px solid black;
    width:40px; 
    box-shadow: 10px 10px 5px grey;
    transform-origin: right top;
    transform: skewX(-45deg);
}*/
  
.svg-logo { 
  min-width:200px;
  max-width:330px;
}
  
</style>
{% assign typeArray = "accents,accessories,audio,bumpers,cages,doors,lighting,roofs,winches" | split: ',' %}

<!-- DETECT BRAND IN URL -->
{%- if request.page_type == "index" -%}
	{% assign url_parts = request.path | split: "/" %}
{%- endif -%}

{%- if request.page_type == "product" -%}
	{% assign url_parts = request.path | split: "-" %}
{%- endif -%}


{% for part in url_parts %}
  {% case part %}
      {% when "polaris" %}
          {% assign currentBrand  = "polaris" %}
          {% assign brandColor = "#305799" %}
          {% break %}
      {% when "yamaha" %}
          {% assign currentBrand  = "yamaha" %}
          {% assign brandColor = "#CCCCCB" %}
          {% break %}
      {% when "can-am" %}
          {% assign currentBrand  = "can-am" %}
          {% assign brandColor = "#fdc832" %}
          {% break %}
      {% when "tracker" %}
          {% assign currentBrand  = "tracker" %}
          {% assign brandColor = "#262526" %}
          {% break %}
      {% when "honda" %}
          {% assign currentBrand  = "honda" %}
          {% assign brandColor = "#e0262f" %}
          {% break %}
      {% else %}
          {% assign currentBrand = "all" %}
          {% assign brandColor = "#ccc" %}
  {% endcase %}
{% endfor %}

<section>
<div class="collection-SubMenu-Section h-full flex flex-nowrap p-0 shadow-lg align-middle" style="background-color:{{ brandColor }};">
<div id="collection-SubMenu" class="w-full h-full flex-cols-1">
  <div class="block w-1/6 flex text-left pt-2 pb-2 drop-shadow brandbox svg-logo h-full">
    <button class="hover: bounce;" onclick="location.href='{{ currentBrand | within:collection }}';">
    {% capture collectionSVG %}collection.{{ currentBrand }}.metafields.make.svg_data.value{% endcapture %} 
    {{ collectionSVG }}
    </button>
  </div>
  <!--<div class="bendybox-45 ml-12" style="margin-top: -8px">&nbsp;</div>-->
  <div class="align-middle">
    <div class="block h-full w-full make-menu text-left md:pl-2 sm:pl-1 lg:pl-4 align-middle mt-0">
    <span class="peer">&nbsp;&nbsp;
      {% for things in typeArray %}
      {% if request.path contains things %} 
      	<a href="#{{ things | downcase }}" class="peer-active:color-black submenu-link">{{ things | upcase }}</a>
      {% else %}
		<a style="color:black;font-weight:500;text-shadow: 0px 0px 0px rgba(0, 0, 0, 0.0);" href="{{ currentBrand | within:collection }}/{{ things }}">{{ things }}</a>
      	&nbsp;&nbsp;â€¢
      {% unless forloop.last %}
      &nbsp;<span style="margin-top:15px !important;font-weight:900;">.</span>&nbsp;   
      {% endunless %}
      {% endif %}
      {% endfor %}
    </span>
</div>
    </div>
</div>
</div>
</section>
{% schema %}
  {
    "name": "Collection Sub Menu",
    "settings": []
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
